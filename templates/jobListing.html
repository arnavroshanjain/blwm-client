{% extends 'base.html' %}
{% block content %}

<div class=" p-5 container">
    <div class="modal fade mt-5 p-5 container " id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalToggleLabel">School Listing</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form onsubmit="return createJobListing()" class="p-3 mb-5 bg-body rounded container">
                    <div class="mb-3">
                      <label class="form-label">Subject:</label>
                      <select id="subject" class="form-select" aria-label="Default select example" >
                        <option value="" selected disabled>Please select</option>
                        {% for row in subs %}
                        <option value ="{{row['subject_id']}}">{{row['subject_name']}}</option>
                        {% endfor %}
                      </select>
                    </div>
                    <div class="mb-3">
                      <label class="form-label">Keystage:</label>
                      <select id="keystage" class="form-select" aria-label="Default select example">
                        <option  selected disabled>Please select</option>
                        {% for i in range (1,5) %}
                        <option  value="{{i}}">Keystage {{i}}</option>
                        {% endfor %}
                      </select>
                    </div>
                    <div class="mb-3">
                        <label for="date" class="form-label">Date:</label>
                        <input type="date" class="form-control" id="date" min="{{today}}">
                      </div>
                    <div class="mb-3">
                      <label for="startTime" class="form-label">Start Time:</label>
                      <input type="time" class="form-control" id="startTime">
                    </div>
                    <div class="mb-3">
                      <label for="endTime" class="form-label">End Time:</label>
                      <input type="time" class="form-control" id="endTime">
                      
                    </div>  
            </div>
            <div class="modal-footer">
              <button class="btn btn-primary" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal">Create listing</button>
            </div>
          </form>
          </div>
          
        </div>
      </div>
      <a class="btn btn-primary" data-bs-toggle="modal" href="#exampleModalToggle" role="button">Create a school listing</a>
    </div>
  </div>
  
  <div>
    {% for row in fields %}
    <div class="row bg-light rounded mb-3 shadow border p-2">
      <div class="col">Subject:{{row['listing_subject']}}</div>
      <div class="col">Keystage:{{row['listing_keystage']}}</div>
      <div class="col">Date:{{row['listing_date']}}</div>
      <div class="col">Start Time:{{row['listing_start_time']}}</div>
      <div class="col">End Time:{{row['listing_end_time']}}</div>
      <div class="col">
        <form action="{{url_for('listing_delete')}}" method="post">
           <input hidden type="text" value="{{row['listing_id']}}" id="lists" name="lists">
           <button type="submit" class="btn btn-danger">DELETE</button>
         </form>

</div>
    </div>
    {% endfor %}
  </div>
{% endblock %}